# Eureka Client Consumer配置文件
server:
  port: 9001

spring:
  application:
    name: consumer-service

eureka:
  client:
    # 是否将自己注册到Eureka Server
    register-with-eureka: true
    # 是否从Eureka Server拉取服务列表
    fetch-registry: true
    # Eureka Server地址（带认证信息）
    service-url:
      defaultZone: http://eureka:eureka123@localhost:8761/eureka/
    # 拉取服务列表的时间间隔（秒）
    registry-fetch-interval-seconds: 30
    
  instance:
    # 是否优先使用IP地址
    prefer-ip-address: true
    # 实例ID
    instance-id: ${spring.cloud.client.ip-address}:${spring.application.name}:${server.port}
    # 心跳间隔（秒）
    lease-renewal-interval-in-seconds: 30
    # 租约过期时间（秒）
    lease-expiration-duration-in-seconds: 90
    # 元数据
    metadata-map:
      zone: zone1
      version: 1.0.0

# Ribbon配置
producer-service:
  ribbon:
    # 负载均衡策略（轮询）
    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RoundRobinRule
    # 连接超时时间（毫秒）
    ConnectTimeout: 3000
    # 读取超时时间（毫秒）
    ReadTimeout: 3000
    # 最大重试次数
    MaxAutoRetries: 1
    # 切换实例的最大重试次数
    MaxAutoRetriesNextServer: 1

# 日志配置
logging:
  level:
    root: INFO
    com.huabin.eureka.consumer: DEBUG
    com.netflix.discovery: DEBUG
  pattern:
    console: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n'

# Actuator配置
management:
  endpoints:
    web:
      exposure:
        include: '*'
  endpoint:
    health:
      show-details: always
